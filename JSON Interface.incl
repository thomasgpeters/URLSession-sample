local fn DictionaryToJSON( object as CFTypeRef ) as CFStringRef'~'1ErrorRef err = NULLCFStringRef jsonStrCFDataRef jsonData = fn JSONSerializationDataWithJSONObject( object, NSJSONWritingPrettyPrinted, @err )jsonStr = fn StringWithData( jsonData, NSUTF8StringEncoding )end fn = jsonStr// print @"\nJSON string from Dictonary:"// CFArrayRef gameDictionaryArray// gameDictionaryArray = @[¬// @{@"game1":@"chess",@"game2":@"video game",@"game3":@"ping pong"},¬// @{@"game4":@"basketball",@"game5":@"hockey",@"game6":@"football"}]// print fn DictionaryToJSON( (CFTypeRef)gameDictionaryArray )// printlocal fn JSONToDictionary( jsonString as CFStringRef ) as CFTypeRef'~'1ErrorRef err = NULLCFDataRef jsonData = fn StringData( jsonString, NSUTF8StringEncoding )CFTypeRef jsonObject = fn JSONSerializationJSONObjectWithData( jsonData, NSJSONReadingAllowFragments, @err )if ( err )printf @"%@", fn ErrorLocalizedDescription( err )exit fnelseexit fn = jsonObjectend ifend fn = jsonObject